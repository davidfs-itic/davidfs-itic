
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="David F">
      
      
        <link rel="canonical" href="https://davidfs-itic.github.io/davidfs-itic/Android/Arquitectura/capa_dades_clean_architecture/">
      
      
        <link rel="prev" href="../capa_dades_android/">
      
      
        <link rel="next" href="../inversiodependencies/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Capa de Dades amb Clean Architecture - Documentació DavidFS - ITIC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#de-larquitectura-android-a-clean-architecture" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-header__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentació DavidFS - ITIC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Capa de Dades amb Clean Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode fosc"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode fosc" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode clar"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode clar" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestanyes" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Inici

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Android

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Exemples/" class="md-tabs__link">
        
  
  
    
  
  Exemples de codi Android

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Unity/" class="md-tabs__link">
          
  
  
  Unity

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Arduino/instalacio/" class="md-tabs__link">
          
  
  
  Arduino

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Transversal/docker/" class="md-tabs__link">
          
  
  
  Transversal

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../IoT/" class="md-tabs__link">
          
  
  
  IoT

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-nav__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Documentació DavidFS - ITIC
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inici
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fragments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fragments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Llenguatge Kotlin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Llenguatge Kotlin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Kotlin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables i Constants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/funcions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/classesobjectes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Classes i Objectes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/nullsafety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Null Safety
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/fextensio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions d'extensió
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/livedata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiveData
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/coroutines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coroutines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/anotadors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anotadors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interficies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interficies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a les Interficies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/layoutactivities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout en Activities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/layouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/temes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Temes i Estils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/viewbinding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VieweBinding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/bottommenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bottom Menu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/appbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/toolbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Toolbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/drawermenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navigation Drawer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/dialegs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialegs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerviewaddelete/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView Afegir i eliminar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerviewfilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Recyclerview filtrat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclersearchview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView amb searchview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/menus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Menús
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/splashscreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splash Screen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/dialogfragmentviewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialog Fragment amb ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/voicerecognition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Voice Recognition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked>
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Arquitectura
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arquitectura
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'Arquitectura
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applicationviewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../observer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capa_dades_android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades en Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades amb Clean Architecture
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades amb Clean Architecture
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-punt-de-partida-arquitectura-android" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Punt de partida: Arquitectura Android
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-pas-1-clean-architecture-minima-afegir-la-interface-del-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Pas 1 — Clean Architecture mínima: afegir la interface del Repository
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Pas 1 — Clean Architecture mínima: afegir la interface del Repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-canvia-i-que-no-canvia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què canvia i què no canvia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-resultant" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama resultant
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-hem-guanyat" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què hem guanyat?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-pas-2-clean-architecture-completa-afegir-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Pas 2 — Clean Architecture completa: afegir Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Pas 2 — Clean Architecture completa: afegir Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-canvia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què canvia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-resultant_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama resultant
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codi_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codi
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-resum-de-la-transicio" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Resum de la transició
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Resum de la transició">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classes-per-capa-a-cada-pas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes per capa a cada pas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direccio-de-les-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direcció de les dependències
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taula-comparativa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Taula comparativa
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-quan-utilitzar-cada-enfocament" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Quan utilitzar cada enfocament?
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inversiodependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inversió de Dependències
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recyclerinversio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemple DIP recycler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Patró Factory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Principis SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Llibreries
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Llibreries
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a les Llibreries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/retrofit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrofit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/mpandroidchart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MPAndroidChart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7_4" >
        
          
          <label class="md-nav__link" for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Firebase
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Firebase
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Firebase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/fbsetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup de Firebase a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/firestore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Firestore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Exemples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemples de codi Android
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Unity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Unity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/scenesprites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scenes i Sprites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/fisiquesmoviment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fisiques i moviment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/recveu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reconeixement de Veu a Unity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Arduino
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arduino
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Arduino/instalacio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instal·lació de l'IDE d'Arduino
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Transversal
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Transversal
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Transversal/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/oracle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guia Oracle Cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Backends IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Backends IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/influxdb3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InfluxDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MQTT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/nodered/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node-RED
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/telegraf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegraf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/thingsboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ThingsBoard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/chirpstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ChirpStack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IIoT (Internet Industrial de les Coses)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    IIoT (Internet Industrial de les Coses)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IIoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/protocols/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Protocols Industrials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/modbus-tcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modbus TCP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/ethernet-ip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ethernet/IP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/fins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-punt-de-partida-arquitectura-android" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Punt de partida: Arquitectura Android
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-pas-1-clean-architecture-minima-afegir-la-interface-del-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Pas 1 — Clean Architecture mínima: afegir la interface del Repository
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Pas 1 — Clean Architecture mínima: afegir la interface del Repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-canvia-i-que-no-canvia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què canvia i què no canvia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-resultant" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama resultant
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codi
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-hem-guanyat" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què hem guanyat?
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-pas-2-clean-architecture-completa-afegir-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Pas 2 — Clean Architecture completa: afegir Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Pas 2 — Clean Architecture completa: afegir Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-canvia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Què canvia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-resultant_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama resultant
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codi_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codi
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-resum-de-la-transicio" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Resum de la transició
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Resum de la transició">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classes-per-capa-a-cada-pas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes per capa a cada pas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direccio-de-les-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Direcció de les dependències
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taula-comparativa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Taula comparativa
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-quan-utilitzar-cada-enfocament" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Quan utilitzar cada enfocament?
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="de-larquitectura-android-a-clean-architecture">De l'arquitectura Android a Clean Architecture<a class="headerlink" href="#de-larquitectura-android-a-clean-architecture" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Prerequisit</p>
<p>Aquest document parteix de l'arquitectura en 2 capes (UI + Dades) explicada a <a href="../capa_dades_android/">Capa repositori i dades</a>. Es recomana llegir-lo primer.</p>
</div>
<h2 id="1-punt-de-partida-arquitectura-android">1. Punt de partida: Arquitectura Android<a class="headerlink" href="#1-punt-de-partida-arquitectura-android" title="Permanent link">&para;</a></h2>
<p>Recordem l'arquitectura que teníem:</p>
<div class="highlight"><pre><span></span><code>┌──────────────────────────────────────────────────┐
│  UI LAYER                                        │
│  Activity/Fragment → ViewModel                   │
│  (depèn de ItemsRepository, classe concreta)     │
└──────────────┬───────────────────────────────────┘
               │
               ▼
┌──────────────────────────────────────────────────┐
│  DATA LAYER                                      │
│                                                  │
│  ItemsRepository (classe concreta)               │
│  └─→ ItemsDataSource (interface)                 │
│      ├─→ MockItemsDataSource                     │
│      └─→ RetrofitItemsDataSource                 │
└──────────────────────────────────────────────────┘
</code></pre></div>
<p>Amb les classes:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Data Layer</span>
<span class="kd">interface</span><span class="w"> </span><span class="nc">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// UI Layer</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsViewModel</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="w">  </span><span class="c1">// classe concreta</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Què ja funciona bé</strong>: Gràcies a la interface <code>ItemsDataSource</code>, podem canviar la font de dades (Mock, Retrofit, Room) sense modificar ni el Repository ni el ViewModel. Per testejar amb dades falses, n'hi ha prou passant un <code>MockItemsDataSource</code> al Repository.</p>
<p><strong>Limitació</strong>: El ViewModel depèn de la classe concreta <code>ItemsRepository</code>. Si volem testejar el ViewModel de forma <strong>aïllada</strong> (sense cap Repository real), no podem crear fàcilment un "fake Repository" perquè no hi ha una interface per implementar. Necessitaríem una llibreria de mocking (com Mockk) per simular la classe concreta.</p>
<p>Amb Clean Architecture, aplicarem DIP <strong>entre capes</strong>: el ViewModel dependrà d'una interface del Repository (definida al Domain), cosa que permetrà substituir el Repository complet per un fake en els tests.</p>
<h2 id="2-pas-1-clean-architecture-minima-afegir-la-interface-del-repository">2. Pas 1 — Clean Architecture mínima: afegir la interface del Repository<a class="headerlink" href="#2-pas-1-clean-architecture-minima-afegir-la-interface-del-repository" title="Permanent link">&para;</a></h2>
<p>El canvi mínim per passar a Clean Architecture és:</p>
<ol>
<li>Crear una <strong>capa de Domini</strong> (Domain Layer)</li>
<li>Crear la <strong>interface del Repository</strong> al Domain</li>
<li>Moure l'<strong>entitat</strong> (<code>MyItem</code>) al Domain</li>
<li>La implementació del Repository queda al Data Layer</li>
</ol>
<h3 id="que-canvia-i-que-no-canvia">Què canvia i què no canvia<a class="headerlink" href="#que-canvia-i-que-no-canvia" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Classe</th>
<th>Android Architecture</th>
<th>Clean Architecture mínima</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MyItem</code></td>
<td>Data Layer</td>
<td><strong>→ Domain Layer</strong></td>
</tr>
<tr>
<td><code>ItemsRepository</code> (interface)</td>
<td>No existia</td>
<td><strong>→ Domain Layer (NOVA)</strong></td>
</tr>
<tr>
<td><code>ItemsRepository</code> (classe concreta)</td>
<td>Data Layer</td>
<td><strong>→ Reanomenada a <code>ItemsRepositoryImpl</code></strong>, es queda al Data Layer</td>
</tr>
<tr>
<td><code>ItemsDataSource</code> (interface)</td>
<td>Data Layer</td>
<td>Data Layer (sense canvis)</td>
</tr>
<tr>
<td><code>MockItemsDataSource</code></td>
<td>Data Layer</td>
<td>Data Layer (sense canvis)</td>
</tr>
<tr>
<td><code>RetrofitItemsDataSource</code></td>
<td>Data Layer</td>
<td>Data Layer (sense canvis)</td>
</tr>
<tr>
<td><code>ItemsViewModel</code></td>
<td>UI Layer</td>
<td>UI Layer (canvia el tipus de dependència)</td>
</tr>
</tbody>
</table>
<h3 id="diagrama-resultant">Diagrama resultant<a class="headerlink" href="#diagrama-resultant" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌──────────────────────────────────────────────────┐
│  UI LAYER                                        │
│  ItemsViewModel                                  │
│  (depèn de ItemsRepository, INTERFACE del Domain)│
└──────────────┬───────────────────────────────────┘
               │ depèn de
               ▼
┌──────────────────────────────────────────────────┐
│  DOMAIN LAYER                                    │
│                                                  │
│  ItemsRepository (interface)                     │
│  MyItem (entitat)                                │
└──────────────────────────────────────────────────┘
               ▲
               │ implementa (depèn de)
┌──────────────┴───────────────────────────────────┐
│  DATA LAYER                                      │
│                                                  │
│  ItemsRepositoryImpl (implementa la interface)   │
│  └─→ ItemsDataSource (interface)                 │
│      ├─→ MockItemsDataSource                     │
│      └─→ RetrofitItemsDataSource                 │
└──────────────────────────────────────────────────┘
</code></pre></div>
<p>Fixeu-vos en la <strong>direcció de les fletxes</strong>: tant la UI com el Data apunten cap al Domain. El Domain no depèn de ningú. Aquesta és la inversió de dependències entre capes.</p>
<h3 id="codi">Codi<a class="headerlink" href="#codi" title="Permanent link">&para;</a></h3>
<h4 id="domain-layer">Domain Layer<a class="headerlink" href="#domain-layer" title="Permanent link">&para;</a></h4>
<p>L'entitat i la interface del Repository:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// domain/model/MyItem.kt</span>
<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">MyItem</span><span class="p">(</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">subtitle</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
<span class="p">)</span>

<span class="c1">// domain/repository/ItemsRepository.kt</span>
<span class="kd">interface</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>El Domain <strong>només conté definicions</strong> (interfaces i entitats). No conté cap implementació ni cap dependència externa.</p>
<h4 id="data-layer">Data Layer<a class="headerlink" href="#data-layer" title="Permanent link">&para;</a></h4>
<p>La implementació del Repository i els DataSources (gairebé igual que abans):</p>
<div class="highlight"><pre><span></span><code><span class="c1">// data/datasource/ItemsDataSource.kt</span>
<span class="kd">interface</span><span class="w"> </span><span class="nc">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// data/repository/ItemsRepositoryImpl.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepositoryImpl</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// ← implementa la interface del DOMAIN</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// data/datasource/MockItemsDataSource.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">MockItemsDataSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="p">(</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol A&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol B&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol C&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* implementació */</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* implementació */</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>L'únic canvi respecte l'arquitectura Android és que <code>ItemsRepositoryImpl</code> ara implementa <code>ItemsRepository</code> (interface del Domain) en lloc de ser una classe independent.</p>
<h4 id="ui-layer">UI Layer<a class="headerlink" href="#ui-layer" title="Permanent link">&para;</a></h4>
<p>El ViewModel ara depèn de la <strong>interface</strong> (Domain), no de la classe concreta (Data):</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ui/ItemsViewModel.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsViewModel</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="w">  </span><span class="c1">// ← INTERFACE, no classe concreta</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="com-es-connecta-tot">Com es connecta tot<a class="headerlink" href="#com-es-connecta-tot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isTesting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MockItemsDataSource</span><span class="p">()</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">RetrofitItemsDataSource</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// El tipus declarat és la INTERFACE (Domain), la implementació és del Data</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemsRepositoryImpl</span><span class="p">(</span><span class="n">dataSource</span><span class="p">)</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">viewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemsViewModel</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
</code></pre></div>
<h3 id="que-hem-guanyat">Què hem guanyat?<a class="headerlink" href="#que-hem-guanyat" title="Permanent link">&para;</a></h3>
<p>Amb aquest canvi mínim (una interface + moure l'entitat):</p>
<ul>
<li><strong>DIP entre capes</strong>: La UI i el Data depenen del Domain. El Domain no depèn de ningú.</li>
<li><strong>Testabilitat del ViewModel</strong>: Podem crear un mock del Repository sense necessitar cap DataSource.</li>
<li><strong>Domain estable</strong>: Si canviem tota la capa de dades (de Retrofit a Room, per exemple), el Domain i la UI no es veuen afectats.</li>
</ul>
<h2 id="3-pas-2-clean-architecture-completa-afegir-use-cases">3. Pas 2 — Clean Architecture completa: afegir Use Cases<a class="headerlink" href="#3-pas-2-clean-architecture-completa-afegir-use-cases" title="Permanent link">&para;</a></h2>
<p>El pas anterior ja ens dóna Clean Architecture. Però el ViewModel encara crida directament el Repository. En projectes grans, això pot ser un problema:</p>
<ul>
<li>Si dos ViewModels necessiten la mateixa operació amb la mateixa lògica, la dupliquem.</li>
<li>La lògica de negoci queda escampada entre ViewModels.</li>
</ul>
<p>La solució són els <strong>Use Cases</strong> (o Interactors): classes al Domain que encapsulen <strong>una única operació de negoci</strong>.</p>
<h3 id="que-canvia">Què canvia<a class="headerlink" href="#que-canvia" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Classe</th>
<th>Clean mínima</th>
<th>Clean completa</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GetItemsUseCase</code></td>
<td>No existia</td>
<td><strong>→ Domain Layer (NOU)</strong></td>
</tr>
<tr>
<td><code>AddItemUseCase</code></td>
<td>No existia</td>
<td><strong>→ Domain Layer (NOU)</strong></td>
</tr>
<tr>
<td><code>ItemsViewModel</code></td>
<td>Depèn de <code>ItemsRepository</code></td>
<td><strong>→ Depèn dels Use Cases</strong></td>
</tr>
<tr>
<td>Resta de classes</td>
<td>—</td>
<td>Sense canvis</td>
</tr>
</tbody>
</table>
<h3 id="diagrama-resultant_1">Diagrama resultant<a class="headerlink" href="#diagrama-resultant_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>┌──────────────────────────────────────────────────┐
│  UI LAYER                                        │
│  ItemsViewModel                                  │
│  (depèn dels Use Cases)                          │
└──────────────┬───────────────────────────────────┘
               │ depèn de
               ▼
┌──────────────────────────────────────────────────┐
│  DOMAIN LAYER                                    │
│                                                  │
│  GetItemsUseCase ──┐                             │
│  AddItemUseCase    ├─→ ItemsRepository (interface)│
│  ...               ┘                             │
│  MyItem (entitat)                                │
└──────────────────────────────────────────────────┘
               ▲
               │ implementa (depèn de)
┌──────────────┴───────────────────────────────────┐
│  DATA LAYER                                      │
│                                                  │
│  ItemsRepositoryImpl                             │
│  └─→ ItemsDataSource (interface)                 │
│      ├─→ MockItemsDataSource                     │
│      └─→ RetrofitItemsDataSource                 │
└──────────────────────────────────────────────────┘
</code></pre></div>
<h3 id="codi_1">Codi<a class="headerlink" href="#codi_1" title="Permanent link">&para;</a></h3>
<h4 id="domain-layer-use-cases">Domain Layer — Use Cases<a class="headerlink" href="#domain-layer-use-cases" title="Permanent link">&para;</a></h4>
<p>Cada Use Case té una única responsabilitat: executar una operació.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// domain/usecase/GetItemsUseCase.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">GetItemsUseCase</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">execute</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// domain/usecase/AddItemUseCase.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">AddItemUseCase</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">execute</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">repository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Per què una classe per operació?</p>
<p>Pot semblar excessiu crear una classe per cada operació. Però els Use Cases són el lloc on afegir lògica de negoci (validacions, transformacions, combinació de repositoris). Si un Use Case només delega al Repository, és perquè encara no té lògica pròpia — però ja tenim l'estructura preparada per quan en necessitem.</p>
</div>
<h4 id="ui-layer-viewmodel-amb-use-cases">UI Layer — ViewModel amb Use Cases<a class="headerlink" href="#ui-layer-viewmodel-amb-use-cases" title="Permanent link">&para;</a></h4>
<p>El ViewModel ja no coneix el Repository. Només coneix els Use Cases:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ui/ItemsViewModel.kt</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsViewModel</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">getItemsUseCase</span><span class="p">:</span><span class="w"> </span><span class="n">GetItemsUseCase</span><span class="p">,</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">addItemUseCase</span><span class="p">:</span><span class="w"> </span><span class="n">AddItemUseCase</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getItemsUseCase</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addItemUseCase</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="com-es-connecta-tot_1">Com es connecta tot<a class="headerlink" href="#com-es-connecta-tot_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Capa de dades</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RetrofitItemsDataSource</span><span class="p">()</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemsRepositoryImpl</span><span class="p">(</span><span class="n">dataSource</span><span class="p">)</span>

<span class="c1">// Capa de domini</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">getItemsUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetItemsUseCase</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">addItemUseCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AddItemUseCase</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span>

<span class="c1">// Capa UI</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">viewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemsViewModel</span><span class="p">(</span><span class="n">getItemsUseCase</span><span class="p">,</span><span class="w"> </span><span class="n">addItemUseCase</span><span class="p">)</span>
</code></pre></div>
<h2 id="4-resum-de-la-transicio">4. Resum de la transició<a class="headerlink" href="#4-resum-de-la-transicio" title="Permanent link">&para;</a></h2>
<h3 id="classes-per-capa-a-cada-pas">Classes per capa a cada pas<a class="headerlink" href="#classes-per-capa-a-cada-pas" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ANDROID ARCHITECTURE (2 capes):
  UI:     ItemsViewModel → ItemsRepository (concreta)
  Data:   ItemsRepository, ItemsDataSource(I), Mock, Retrofit

CLEAN MÍNIMA (3 capes, sense Use Cases):
  UI:     ItemsViewModel → ItemsRepository (interface)
  Domain: ItemsRepository(I), MyItem
  Data:   ItemsRepositoryImpl, ItemsDataSource(I), Mock, Retrofit

CLEAN COMPLETA (3 capes, amb Use Cases):
  UI:     ItemsViewModel → GetItemsUseCase, AddItemUseCase
  Domain: GetItemsUseCase, AddItemUseCase, ItemsRepository(I), MyItem
  Data:   ItemsRepositoryImpl, ItemsDataSource(I), Mock, Retrofit
</code></pre></div>
<h3 id="direccio-de-les-dependencies">Direcció de les dependències<a class="headerlink" href="#direccio-de-les-dependencies" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Android:        UI ──────▶ Data              (cap avall)
Clean mínima:   UI ──────▶ Domain ◀────── Data  (inversió entre capes)
Clean completa: UI ──────▶ Domain ◀────── Data  (igual, amb Use Cases)
</code></pre></div>
<h3 id="taula-comparativa">Taula comparativa<a class="headerlink" href="#taula-comparativa" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th></th>
<th>Android</th>
<th>Clean mínima</th>
<th>Clean completa</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Capes</strong></td>
<td>2 (UI + Data)</td>
<td>3 (UI + Domain + Data)</td>
<td>3 (UI + Domain + Data)</td>
</tr>
<tr>
<td><strong>Repository</strong></td>
<td>Classe concreta</td>
<td>Interface (Domain) + Impl (Data)</td>
<td>Interface (Domain) + Impl (Data)</td>
</tr>
<tr>
<td><strong>ViewModel depèn de</strong></td>
<td><code>ItemsRepository</code> (classe)</td>
<td><code>ItemsRepository</code> (interface)</td>
<td>Use Cases</td>
</tr>
<tr>
<td><strong>Domain conté</strong></td>
<td>—</td>
<td>Interface Repository + Entitats</td>
<td>Interface Repository + Use Cases + Entitats</td>
</tr>
<tr>
<td><strong>DIP entre capes</strong></td>
<td>No</td>
<td>Sí</td>
<td>Sí</td>
</tr>
<tr>
<td><strong>Lògica de negoci</strong></td>
<td>Al ViewModel</td>
<td>Al ViewModel</td>
<td>Als Use Cases</td>
</tr>
</tbody>
</table>
<h2 id="5-quan-utilitzar-cada-enfocament">5. Quan utilitzar cada enfocament?<a class="headerlink" href="#5-quan-utilitzar-cada-enfocament" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><strong>Android Architecture (2 capes)</strong>: Projectes petits o prototips. Suficient quan no necessites testejar el ViewModel de forma aïllada i la lògica de negoci és mínima.</p>
</li>
<li>
<p><strong>Clean mínima (3 capes, sense Use Cases)</strong>: Projectes mitjans. Vols independència entre capes i testabilitat, però no tens lògica de negoci complexa ni compartida entre ViewModels.</p>
</li>
<li>
<p><strong>Clean completa (3 capes, amb Use Cases)</strong>: Projectes grans. Tens lògica de negoci que es reutilitza entre ViewModels, múltiples fonts de dades, o necessites una capa de domini sòlida i testable.</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Nota important</p>
<p>La documentació oficial d'Android inclou aquesta nota: <em>"The term 'domain layer' is used in other software architectures, such as 'clean' architecture, and has a different meaning there. Don't confuse the definition of 'domain layer' defined in the Android official architecture guidance with other definitions you may have read elsewhere."</em></p>
<p>El Domain Layer d'Android (opcional, dependències cap avall) <strong>no és el mateix</strong> que el Domain Layer de Clean Architecture (obligatori, independent, amb inversió de dependències).</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>