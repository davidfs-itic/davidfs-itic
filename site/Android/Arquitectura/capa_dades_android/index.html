
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="David F">
      
      
        <link rel="canonical" href="https://davidfs-itic.github.io/davidfs-itic/Android/Arquitectura/capa_dades_android/">
      
      
        <link rel="prev" href="../observer/">
      
      
        <link rel="next" href="../capa_dades_clean_architecture/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Capa de Dades en Android - Documentació DavidFS - ITIC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#capa-repositori-i-dades" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-header__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentació DavidFS - ITIC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Capa de Dades en Android
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode fosc"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode fosc" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode clar"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode clar" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestanyes" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Inici

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Android

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Exemples/" class="md-tabs__link">
        
  
  
    
  
  Exemples de codi Android

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Unity/" class="md-tabs__link">
          
  
  
  Unity

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Arduino/instalacio/" class="md-tabs__link">
          
  
  
  Arduino

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Transversal/docker/" class="md-tabs__link">
          
  
  
  Transversal

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../IoT/" class="md-tabs__link">
          
  
  
  IoT

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-nav__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Documentació DavidFS - ITIC
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inici
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fragments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fragments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Llenguatge Kotlin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Llenguatge Kotlin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Kotlin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables i Constants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/funcions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/classesobjectes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Classes i Objectes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/nullsafety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Null Safety
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/fextensio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions d'extensió
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/livedata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiveData
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/coroutines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coroutines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/anotadors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anotadors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interficies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interficies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a les Interficies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/layoutactivities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout en Activities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/layouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/temes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Temes i Estils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/viewbinding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VieweBinding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/bottommenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bottom Menu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/appbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/toolbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Toolbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/drawermenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navigation Drawer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/dialegs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialegs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerviewaddelete/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView Afegir i eliminar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerviewfilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Recyclerview filtrat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclersearchview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView amb searchview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/menus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Menús
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/splashscreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splash Screen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/dialogfragmentviewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialog Fragment amb ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/voicerecognition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Voice Recognition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked>
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Arquitectura
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arquitectura
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'Arquitectura
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../applicationviewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Application ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../observer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades en Android
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades en Android
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-situacio-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Situació inicial
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Situació inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problemes-darquitectura" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes d'arquitectura
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problemes-que-pot-ocasionar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes que pot ocasionar
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-analisi-del-codi-incorrecte-sense-separacio-de-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Anàlisi del codi incorrecte (sense separació de capes)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Anàlisi del codi incorrecte (sense separació de capes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectiu-separar-la-ui-de-les-dades" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectiu: separar la UI de les dades
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-arquitectura-en-2-capes-ui-dades" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Arquitectura en 2 capes (UI + Dades)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-implementacio" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Implementació
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Implementació">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capa-de-dades-data-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Capa de Dades (Data Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capa-ui-ui-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Capa UI (UI Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#com-es-connecta-tot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Com es connecta tot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-capa-de-domini-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Capa de Domini (opcional)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-principis-aplicats" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Principis aplicats
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Principis aplicats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inversio-de-dependencies-dip-entre-repository-i-datasource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inversió de dependències (DIP) entre Repository i DataSource
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-diferencies-amb-clean-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Diferències amb Clean Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Diferències amb Clean Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagrama-comparatiu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama comparatiu
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../capa_dades_clean_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dades amb Clean Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inversiodependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inversió de Dependències
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recyclerinversio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemple DIP recycler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Patró Factory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Principis SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Llibreries
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Llibreries
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a les Llibreries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/retrofit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrofit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Llibreries/mpandroidchart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MPAndroidChart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7_4" >
        
          
          <label class="md-nav__link" for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Firebase
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Firebase
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Firebase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/fbsetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup de Firebase a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/firestore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Firestore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Exemples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemples de codi Android
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Unity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Unity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/scenesprites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scenes i Sprites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/fisiquesmoviment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fisiques i moviment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Unity/recveu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reconeixement de Veu a Unity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Arduino
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arduino
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Arduino/instalacio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instal·lació de l'IDE d'Arduino
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Transversal
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Transversal
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Transversal/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/oracle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guia Oracle Cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Backends IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Backends IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/influxdb3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InfluxDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/mqtt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MQTT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/nodered/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node-RED
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/telegraf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegraf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/thingsboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ThingsBoard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/contenidors/chirpstack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ChirpStack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IIoT (Internet Industrial de les Coses)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    IIoT (Internet Industrial de les Coses)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IIoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/protocols/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Protocols Industrials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/modbus-tcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modbus TCP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/ethernet-ip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ethernet/IP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/IIoT/fins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-situacio-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Situació inicial
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Situació inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problemes-darquitectura" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes d'arquitectura
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problemes-que-pot-ocasionar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes que pot ocasionar
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-analisi-del-codi-incorrecte-sense-separacio-de-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Anàlisi del codi incorrecte (sense separació de capes)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Anàlisi del codi incorrecte (sense separació de capes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectiu-separar-la-ui-de-les-dades" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectiu: separar la UI de les dades
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-arquitectura-en-2-capes-ui-dades" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Arquitectura en 2 capes (UI + Dades)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-implementacio" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Implementació
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Implementació">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capa-de-dades-data-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Capa de Dades (Data Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capa-ui-ui-layer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Capa UI (UI Layer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#com-es-connecta-tot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Com es connecta tot
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-capa-de-domini-opcional" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Capa de Domini (opcional)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-principis-aplicats" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Principis aplicats
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Principis aplicats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inversio-de-dependencies-dip-entre-repository-i-datasource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inversió de dependències (DIP) entre Repository i DataSource
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-diferencies-amb-clean-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Diferències amb Clean Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Diferències amb Clean Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagrama-comparatiu" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama comparatiu
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="capa-repositori-i-dades">Capa repositori i dades<a class="headerlink" href="#capa-repositori-i-dades" title="Permanent link">&para;</a></h1>
<p>Documents rellevants:</p>
<ul>
<li>https://developer.android.com/topic/architecture/data-layer</li>
<li>https://developer.android.com/topic/architecture/domain-layer</li>
</ul>
<h2 id="1-situacio-inicial">1. Situació inicial<a class="headerlink" href="#1-situacio-inicial" title="Permanent link">&para;</a></h2>
<p>Partint del codi relatiu al RecyclerView, veurem que té algunes mancances o dificultats.
No respecta els principis de clean code, ni té cap arquitectura definida:</p>
<h3 id="problemes-darquitectura">Problemes d'arquitectura<a class="headerlink" href="#problemes-darquitectura" title="Permanent link">&para;</a></h3>
<p><strong>Absència de separació de capes:</strong>
La Activity accedeix directament a les dades (directament a la llista en memòria o mitjançant una API). Això crea un acoblament fort i dificulta enormement el testing i el manteniment.</p>
<p><strong>DataSource com a singleton estàtic:</strong>
Qualsevol canvi en com s'obtenen les dades (API, base de dades local, etc.) requerirà modificar directament la Activity, però també tots els llocs on s'utilitza.</p>
<p><strong>Lògica de negoci a la UI:</strong> La Activity està fent massa coses: configura el RecyclerView, gestiona el clic, i decideix què mostrar (el Toast o l'error). No hi ha cap ViewModel ni cap capa intermèdia que gestioni l'estat o la lògica.</p>
<h3 id="problemes-que-pot-ocasionar">Problemes que pot ocasionar<a class="headerlink" href="#problemes-que-pot-ocasionar" title="Permanent link">&para;</a></h3>
<ul>
<li>Escalabilitat nul·la: Quan el projecte creixi i necessitis múltiples fonts de dades, càrrega asíncrona, caché, o sincronització, aquest codi serà molt difícil de mantenir.</li>
<li>Impossibilitat de testing automàtic: Aquest codi fa els tests pràcticament impossibles.</li>
<li>Duplicació de codi futura: Sense una arquitectura clara, cada nova funcionalitat similar acabarà repetint patrons, copiant i enganxant codi.</li>
</ul>
<h2 id="2-analisi-del-codi-incorrecte-sense-separacio-de-capes">2. Anàlisi del codi incorrecte (sense separació de capes)<a class="headerlink" href="#2-analisi-del-codi-incorrecte-sense-separacio-de-capes" title="Permanent link">&para;</a></h2>
<p>Item: Classe que conté les dades que necessitem (pot ser recepta, pel·lícula, reserva, itemcompra, ticket, etc.)</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Fitxer: MyItem.kt</span>
<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">MyItem</span><span class="p">(</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">subtitle</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
<span class="p">)</span>
</code></pre></div>
<p>DataSource: Classe (objecte en aquest cas) que conté la llista d'items</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Fitxer: DataSource.kt</span>

<span class="cm">/**</span>
<span class="cm"> * Objecte singleton que proporciona dades en memòria</span>
<span class="cm"> * per ser utilitzades al RecyclerView.</span>
<span class="cm"> */</span>
<span class="kd">object</span><span class="w"> </span><span class="nc">DataSource</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Llista de dades en memòria (només de lectura)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 1&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 2&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 3&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element 4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 4&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Des de <strong>l'Activity</strong>, es crea la llista d'items, la qual cosa és incorrecte doncs no és la tasca de l'Activity.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// A dins de l&#39;Activity:</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataSource</span><span class="p">.</span><span class="na">items</span>
</code></pre></div>
<h3 id="objectiu-separar-la-ui-de-les-dades">Objectiu: separar la UI de les dades<a class="headerlink" href="#objectiu-separar-la-ui-de-les-dades" title="Permanent link">&para;</a></h3>
<p>Hem de fer que les dades siguin independents de la UI, perquè la UI pugui cridar un mètode genèric sense saber d'on venen les dades ni com s'obtenen.</p>
<p>La classe que coordina l'accés a les dades s'anomena <strong>Repository</strong>, i pertany a la <strong>capa de dades</strong> (Data Layer).</p>
<h2 id="3-arquitectura-en-2-capes-ui-dades">3. Arquitectura en 2 capes (UI + Dades)<a class="headerlink" href="#3-arquitectura-en-2-capes-ui-dades" title="Permanent link">&para;</a></h2>
<p>Seguint l'arquitectura oficial d'Android, separarem el codi en dues capes:</p>
<ol>
<li><strong>UI Layer</strong> (Activity, Fragment, ViewModel)</li>
<li><strong>Data Layer</strong> (Repository + DataSources)</li>
</ol>
<div class="highlight"><pre><span></span><code>┌──────────────────────────────────────────────────────┐
│  UI LAYER                                            │
│  Activity/Fragment → ViewModel                       │
│  (depèn del Repository)                              │
└──────────────┬───────────────────────────────────────┘
               │
               ▼
┌──────────────────────────────────────────────────────┐
│  DATA LAYER                                          │
│                                                      │
│  ItemsRepository (classe concreta)                   │
│  └─→ ItemsDataSource (interface)                     │
│      ├─→ MockItemsDataSource                         │
│      ├─→ RetrofitItemsDataSource                     │
│      └─→ RoomItemsDataSource                         │
└──────────────────────────────────────────────────────┘
</code></pre></div>
<p>El <strong>Repository</strong> és una classe concreta que actua com a punt d'entrada a la capa de dades. El ViewModel el rep directament.</p>
<p>Els <strong>DataSources</strong> són classes que implementen una interface, la qual cosa permet intercanviar la font de dades (Mock, API, Room) sense modificar el Repository.</p>
<h2 id="4-implementacio">4. Implementació<a class="headerlink" href="#4-implementacio" title="Permanent link">&para;</a></h2>
<h3 id="capa-de-dades-data-layer">Capa de Dades (Data Layer)<a class="headerlink" href="#capa-de-dades-data-layer" title="Permanent link">&para;</a></h3>
<h4 id="interface-del-datasource">Interface del DataSource<a class="headerlink" href="#interface-del-datasource" title="Permanent link">&para;</a></h4>
<p>Defineix el contracte que han de complir totes les fonts de dades:</p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="datasources-concrets">DataSources concrets<a class="headerlink" href="#datasources-concrets" title="Permanent link">&para;</a></h4>
<p>Ara podem crear múltiples DataSources, amb implementacions diferents (Mock, API, base de dades):</p>
<div class="admonition note">
<p class="admonition-title">Què és Mock?</p>
<p>Mock es refereix a dades falses, i s'utilitza en programació per provar les classes abans no es tingui una base de dades, API, etc.
En aquest cas, el MockItemsDataSource és una llista precodificada (com havíem fet abans en el nostre object DataSource).</p>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MockItemsDataSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="p">(</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol A&quot;</span><span class="p">),</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol B&quot;</span><span class="p">),</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Títol 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol C&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">)</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* implementació */</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* implementació */</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>


<span class="kd">class</span><span class="w"> </span><span class="nc">RetrofitItemsDataSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* crida a l&#39;API */</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* crida a l&#39;API */</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* crida a l&#39;API */</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">RetrofitClient</span><span class="p">.</span><span class="na">instance</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">id</span><span class="p">).</span><span class="na">execute</span><span class="p">()</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="repository">Repository<a class="headerlink" href="#repository" title="Permanent link">&para;</a></h4>
<p>El Repository és una <strong>classe concreta</strong> (sense interface). Rep un DataSource i li delega l'accés a les dades. No sap (ni li importa) si el DataSource és Mock, Retrofit o Room:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Per què el Repository és útil, si ara mateix només delega al DataSource?
Perquè quan el projecte creixi, el Repository serà el lloc on afegir:</p>
<ul>
<li>Gestió de caché</li>
<li>Combinació de múltiples fonts de dades (local + remota)</li>
<li>Decisió de quan usar dades locals vs remotes</li>
<li>Transformació de dades entre capes</li>
<li>Gestió d'errors i fallbacks</li>
</ul>
<p>El DataSource, en canvi, s'encarrega NOMÉS d'obtenir/guardar dades d'una font específica.</p>
<h3 id="capa-ui-ui-layer">Capa UI (UI Layer)<a class="headerlink" href="#capa-ui-ui-layer" title="Permanent link">&para;</a></h3>
<p>El ViewModel rep el Repository directament:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">ItemsViewModel</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsRepository</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">repository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="com-es-connecta-tot">Com es connecta tot<a class="headerlink" href="#com-es-connecta-tot" title="Permanent link">&para;</a></h3>
<p>A l'hora de crear les instàncies, decidim quina implementació del DataSource utilitzem:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Triem el DataSource segons l&#39;entorn</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isTesting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MockItemsDataSource</span><span class="p">()</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">RetrofitItemsDataSource</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">// Creem el Repository amb el DataSource triat</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemsRepository</span><span class="p">(</span><span class="n">dataSource</span><span class="p">)</span>

<span class="c1">// Ja podem fer servir el repository independentment de la font de dades</span>
<span class="n">repository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">MyItem</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Nou element&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol nou&quot;</span><span class="p">))</span>
</code></pre></div>
<h2 id="5-capa-de-domini-opcional">5. Capa de Domini (opcional)<a class="headerlink" href="#5-capa-de-domini-opcional" title="Permanent link">&para;</a></h2>
<p>Segons la documentació oficial d'Android, la capa de Domini és <strong>opcional</strong>. S'afegeix quan necessitem <strong>Use Cases</strong>: lògica de negoci reutilitzable entre diferents ViewModels.</p>
<p><a href="https://developer.android.com/topic/architecture/domain-layer">Veure la documentació oficial de Domain Layer</a></p>
<p>En l'arquitectura Android, la direcció de les dependències és natural (cap avall):</p>
<div class="highlight"><pre><span></span><code>┌───────────────────────────────┐
│  UI LAYER                     │
│  ViewModel                    │
└──────────────┬────────────────┘
               │ depèn de
               ▼
┌───────────────────────────────┐
│  DOMAIN LAYER (opcional)      │
│  Use Cases                    │
└──────────────┬────────────────┘
               │ depèn de
               ▼
┌───────────────────────────────┐
│  DATA LAYER                   │
│  Repository + DataSources     │
└───────────────────────────────┘
</code></pre></div>
<p>El Domain Layer depèn del Data Layer (utilitza el Repository). Simplement afegeix una capa d'intermediaris (Use Cases) entre la UI i les dades.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Veure apartat de Use Cases per a més detalls.</p>
</div>
<h2 id="6-principis-aplicats">6. Principis aplicats<a class="headerlink" href="#6-principis-aplicats" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Single Responsibility</strong>: Cada classe té una única responsabilitat.</li>
<li><strong>Separation of Concerns</strong>: La UI no sap d'on venen les dades, el Repository no sap com s'obtenen, el DataSource no sap qui el crida.</li>
</ul>
<h3 id="inversio-de-dependencies-dip-entre-repository-i-datasource">Inversió de dependències (DIP) entre Repository i DataSource<a class="headerlink" href="#inversio-de-dependencies-dip-entre-repository-i-datasource" title="Permanent link">&para;</a></h3>
<p>Dins la capa de dades, s'aplica el principi d'inversió de dependències entre el Repository i els DataSources.</p>
<p><strong>Sense DIP</strong>, el Repository dependria directament d'una implementació concreta:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ❌ Sense DIP: el Repository depèn d&#39;una classe concreta</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MockItemsDataSource</span><span class="p">()</span><span class="w">  </span><span class="c1">// acoblament fort</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Si volem canviar de <code>MockItemsDataSource</code> a <code>RetrofitItemsDataSource</code>, hem de modificar el Repository.</p>
<p><strong>Amb DIP</strong>, el Repository depèn d'una abstracció (interface):</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ✅ Amb DIP: el Repository depèn de la interface</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span><span class="w">  </span><span class="c1">// interface, no implementació</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                    ItemsDataSource (interface)
                   ╱                          ╲
                  ╱   depèn de      implementa ╲
                 ╱                               ╲
    ItemsRepository              MockItemsDataSource
    (mòdul alt nivell)           RetrofitItemsDataSource
                                 RoomItemsDataSource
                                 (mòduls baix nivell)
</code></pre></div>
<p>Tant el mòdul d'alt nivell (Repository) com els de baix nivell (DataSources concrets) depenen de l'abstracció. Això és el principi DIP:</p>
<blockquote>
<p><em>"Els mòduls d'alt nivell no han de dependre dels mòduls de baix nivell. Ambdós han de dependre d'abstraccions."</em></p>
</blockquote>
<p>D'aquesta manera, podem canviar la implementació del DataSource (de Mock a Retrofit, de Retrofit a Room) sense tocar ni una línia del Repository ni de la UI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>En l'arquitectura Android, la DIP s'aplica <strong>a nivell de classe</strong> (entre Repository i DataSource), no entre capes. Per veure la DIP aplicada entre capes, consulteu l'apartat de Clean Architecture (secció 7).</p>
</div>
<p><img alt="Data Layer" src="../Imatges/datalayer.png" /></p>
<h2 id="7-diferencies-amb-clean-architecture">7. Diferències amb Clean Architecture<a class="headerlink" href="#7-diferencies-amb-clean-architecture" title="Permanent link">&para;</a></h2>
<p>L'arquitectura oficial d'Android i Clean Architecture (Uncle Bob) comparteixen la idea de separar en capes, però tenen diferències importants:</p>
<table>
<thead>
<tr>
<th></th>
<th>Arquitectura Android</th>
<th>Clean Architecture</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Repository</strong></td>
<td>Classe concreta al Data Layer</td>
<td>Interface al Domain + Implementació al Data</td>
</tr>
<tr>
<td><strong>Domain Layer</strong></td>
<td>Opcional. Conté Use Cases</td>
<td>Obligatori. És el nucli de l'aplicació</td>
</tr>
<tr>
<td><strong>Domain depèn de...</strong></td>
<td>Data Layer (direcció natural)</td>
<td>Res. És completament independent</td>
</tr>
<tr>
<td><strong>Direcció dependències</strong></td>
<td>UI → Domain → Data (cap avall)</td>
<td>UI → Domain ← Data (inversió entre capes)</td>
</tr>
<tr>
<td><strong>DIP entre capes</strong></td>
<td>No. Només a nivell de classe (DataSource interface)</td>
<td>Sí. El Data Layer implementa interfaces definides al Domain</td>
</tr>
</tbody>
</table>
<h3 id="diagrama-comparatiu">Diagrama comparatiu<a class="headerlink" href="#diagrama-comparatiu" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>ANDROID ARCHITECTURE:           CLEAN ARCHITECTURE:

UI ──────▶ Domain ──────▶ Data  UI ──────▶ Domain ◀────── Data
          (opcional)                     (obligatori)
     tot cap avall                  tot apunta al Domain
</code></pre></div>
<p>En Clean Architecture, el Domain defineix les interfaces (contractes): la UI en depèn (a través dels Use Cases) i el Data les implementa. El Domain no depèn de ningú, és el nucli estable de l'aplicació.</p>
<div class="admonition warning">
<p class="admonition-title">Nota important</p>
<p>La documentació oficial d'Android inclou aquesta nota: <em>"The term 'domain layer' is used in other software architectures, such as 'clean' architecture, and has a different meaning there. Don't confuse the definition of 'domain layer' defined in the Android official architecture guidance with other definitions you may have read elsewhere."</em></p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Veure apartat d'inversió de dependències per aprofundir en Clean Architecture.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>