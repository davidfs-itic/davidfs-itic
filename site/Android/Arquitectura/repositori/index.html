
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="David F">
      
      
        <link rel="canonical" href="https://davidfs-itic.github.io/davidfs-itic/Android/Arquitectura/repositori/">
      
      
        <link rel="prev" href="../observer/">
      
      
        <link rel="next" href="../inversiodependencies/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Repositori - Documentació DavidFS - ITIC</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#capa-repositori-i-dades" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-header__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentació DavidFS - ITIC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Repositori
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode fosc"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode fosc" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Canviar a mode clar"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode clar" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestanyes" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Inici

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Android

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Exemples/" class="md-tabs__link">
        
  
  
    
  
  Exemples de codi Android

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Arduino/" class="md-tabs__link">
        
  
  
    
  
  Arduino

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../referencies/" class="md-tabs__link">
        
  
  
    
  
  Referències

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../IoT/introduccio.md" class="md-tabs__link">
          
  
  
  IoT

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Documentació DavidFS - ITIC" class="md-nav__button md-logo" aria-label="Documentació DavidFS - ITIC" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Documentació DavidFS - ITIC
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inici
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../activities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Activities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fragments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fragments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Llenguatge Kotlin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Llenguatge Kotlin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/introduccio.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Kotlin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/variables.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables i Constats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/funcions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/classesobjectes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Classes i Objectes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/nullsafety.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Null Safety
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/collections.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/fextensio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funcions d'extensió
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/coroutines.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coroutines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kotlin/flow.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interficies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interficies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/layouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layouts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/temes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Temes i Estils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/appbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/toolbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Toolbar
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/bottommenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bottom Menu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/drawermenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navigation Drawer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/dialegs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dialegs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/recyclerview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RecyclerView
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/menus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Menús
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Interficies/splashscreen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splash Screen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" checked>
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Arquitectura
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arquitectura
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'Arquitectura
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewbinding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VieweBinding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewmodel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ViewModel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../livedata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiveData
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../observer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Repositori
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Repositori
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-situacio-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Situació inicial
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Situació inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problemes-darquitectura" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes d'arquitectura
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problemes-de-clean-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes de Clean Code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problemes-que-pot-ocasionar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes que pot ocasionar
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-analisi-codi-incorrectesense-separacio-de-capa" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Anàlisi codi Incorrecte:(sense separació de capa)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Anàlisi codi Incorrecte:(sense separació de capa)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectiu-del-clean-clode-i-arquitectura-per-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectiu del Clean Clode i arquitectura per capes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-implementacio-correcte-amb-separacio-de-capes-uidominidatasource" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Implementació correcte (amb separació de capes UI,Domini,DataSource)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-explicacio-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Explicació capes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Explicació capes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principis-de-clean-code-aplicats" class="md-nav__link">
    <span class="md-ellipsis">
      
        Principis de Clean Code aplicats:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esquema-general" class="md-nav__link">
    <span class="md-ellipsis">
      
        Esquema general:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inversiodependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inversió de Dependències
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recyclerinversio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemple DIP recycler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bases de Dades
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bases de Dades
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BasesDeDades/room.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Room
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BasesDeDades/sharedpreferences.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SharedPreferences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Firebase
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Firebase
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/introduccio.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a Firebase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/fbsetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup de Firebase a Android
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/autenticacio.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autenticació
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/firestore.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Firestore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/storage.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Firebase/fcm.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FireCloud Messaging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Exemples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exemples de codi Android
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Arduino/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arduino
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../referencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Referències
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/introduccio.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dispositius IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dispositius IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/sensors.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sensors IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/raspberrypi.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/arduinoiot.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arduino IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Backends IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Backends IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/influxdb.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InfluxDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/nodered.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node-RED
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/thingsboard.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ThingsBoard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/grafana.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/mqtt.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MQTT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/chirpstack.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ChirpStack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Protocols IoT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Protocols IoT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/http.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP/HTTPS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/mqttprotocol.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MQTT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/coap.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CoAP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/lorawan.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LoRaWAN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/sigfox.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sigfox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/nbiot.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NB-IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/zigbee.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zigbee
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    IIoT (Internet Industrial de les Coses)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    IIoT (Internet Industrial de les Coses)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/iiot/introduccio.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducció a l'IIoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/iiot/protocols.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Protocols Industrials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/iiot/plataformes.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plataformes IIoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/iiot/casos.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Casos d'Ús IIoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../IoT/seguretat.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seguretat IoT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-situacio-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Situació inicial
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Situació inicial">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problemes-darquitectura" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes d'arquitectura
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problemes-de-clean-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes de Clean Code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problemes-que-pot-ocasionar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problemes que pot ocasionar
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-analisi-codi-incorrectesense-separacio-de-capa" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Anàlisi codi Incorrecte:(sense separació de capa)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Anàlisi codi Incorrecte:(sense separació de capa)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectiu-del-clean-clode-i-arquitectura-per-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectiu del Clean Clode i arquitectura per capes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-implementacio-correcte-amb-separacio-de-capes-uidominidatasource" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Implementació correcte (amb separació de capes UI,Domini,DataSource)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-explicacio-capes" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Explicació capes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Explicació capes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principis-de-clean-code-aplicats" class="md-nav__link">
    <span class="md-ellipsis">
      
        Principis de Clean Code aplicats:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esquema-general" class="md-nav__link">
    <span class="md-ellipsis">
      
        Esquema general:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="capa-repositori-i-dades">Capa repositori i dades</h1>
<h2 id="1-situacio-inicial">1. Situació inicial</h2>
<p>Partint del codi on està explicat el recyclerview, veurem que té algunes mancances o dificultats.
No respecta els principis de clean code, ni té cap arquitectura definida:</p>
<h3 id="problemes-darquitectura">Problemes d'arquitectura</h3>
<p><strong>Absència de separació de capes:</strong> 
 La MainActivity accedeix directament a DataSource.Això crea un acoblament fort i dificulta enormement el testing i el manteniment.</p>
<p><strong>DataSource com a singleton estàtic:</strong> 
Tenir les dades amb una llista és una pràctica molt dolenta. Qualsevol canvi en com s'obtenen les dades (API, base de dades local, etc.) requerirà modificar directament aquest objecte i tots els llocs on s'utilitza.</p>
<p><strong>Lògica de negoci a la UI:</strong> La MainActivity està fent massa coses: configura el RecyclerView, gestiona el clic, i decideix què mostrar (el Toast). No hi ha cap ViewModel ni cap capa intermèdia que gestioni l'estat o la lògica.</p>
<h3 id="problemes-de-clean-code">Problemes de Clean Code</h3>
<p><strong>Acoblament fort:</strong> MyAdapter rep la lambda onItemClick i la passa directament a MyViewHolder. Això crea una cadena de dependències rígida. Si necessites canviar com es gestionen els clics, has de tocar múltiples classes.</p>
<p><strong>Responsabilitat única no complerta:</strong> MyViewHolder no només presenta dades, sinó que també gestiona esdeveniments. La MainActivity ha de </p>
<p><strong>Falta de testabilitat:</strong> És impossible testejar aquest codi adequadament. No pots fer unit tests de la lògica de negoci perquè està barrejada amb Android framework (Toast, Context). No pots fer un joc de proves amb DataSource perquè és un objecte singleton.</p>
<h2 id="problemes-que-pot-ocasionar">Problemes que pot ocasionar</h2>
<ul>
<li>Escalabilitat nul·la: Quan el projecte creixi i necessitis múltiples fonts de dades, càrrega asíncrona, caché, o sincronització, aquest codi serà molt difícil de mantenir.</li>
<li>Impossibilitat de testing automàtic: Aquest codi fa els tests pràcticament impossibles.</li>
<li>Duplicació de codi futura: Sense una arquitectura clara, cada nova funcionalitat similar acabarà repetint patrons, copiant i enganxant codi.</li>
<li>Rigidesa extrema: Qualsevol canvi de requisits (per exemple, fer les dades editables, carregar-les d'una API, afegir paginació) requerirà refactoritzar gran part del codi.</li>
<li>Dificultat de col·laboració: En un equip, aquest codi seria un malson perquè no segueix cap estructura reconeguda, fent que altres desenvolupadors no sàpiguen on posar nova funcionalitat.</li>
<li>Problemes de configuració i cicle de vida: Tot està lligat al cicle de vida de l'Activity sense cap gestió adequada. Si l'Activity es destrueix i recrea (rotació de pantalla), pots tenir problemes amb referències i estat.</li>
</ul>
<h2 id="2-analisi-codi-incorrectesense-separacio-de-capa">2. Anàlisi codi Incorrecte:(sense separació de capa)</h2>
<p>Item: Classe que conté les dades que necessitem (pot ser recepta, pelicula, reserva, itemcompra, ticket, etc..)</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Fitxer: MyItem.kt</span>
<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">MyItem</span><span class="p">(</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">subtitle</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
<span class="p">)</span>
</code></pre></div>
<p>Datasource: Classe (objecte en aquest cas) que conté la llista d'items</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// Fitxer: DataSource.kt</span>

<span class="cm">/**</span>
<span class="cm"> * Objecte singleton que proporciona dades en memòria</span>
<span class="cm"> * per ser utilitzades al RecyclerView.</span>
<span class="cm"> */</span>
<span class="kd">object</span><span class="w"> </span><span class="nc">DataSource</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Llista de dades en memòria (només de lectura)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="s">&quot;Element 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 1&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="s">&quot;Element 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 2&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="s">&quot;Element 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 3&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">MyItem</span><span class="p">(</span><span class="s">&quot;Element 4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Subtítol 4&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
Des de l'activity, es crea la llista d'items. Aixó és incorrecte doncs 
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="c1">// 3. Crear llista de dades (des de DataSource o directament)</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DataSource</span><span class="p">.</span><span class="na">items</span>
</code></pre></div></p>
<h3 id="objectiu-del-clean-clode-i-arquitectura-per-capes">Objectiu del Clean Clode i arquitectura per capes</h3>
<p>Hem de fer independent les dades de la implementació, perque la UI pugui cridar un métode  genèric.</p>
<p>Aquesta classe s'anomena Repositori.</p>
<p>Repository: Coordinador i font de dades. Recupera les dades, pero no directament, sinó a través dels datasources.</p>
<p>Per exemple:
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">ItemsRepository</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dataSource</span><span class="p">:</span><span class="w"> </span><span class="n">ItemsDataSource</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">dataSource</span><span class="p">.</span><span class="na">getItems</span><span class="p">()</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>D'aquesta manera, passant un datasource qualsevol el repositori pot obtenir el llistat, i no importa com estigui implementat aquest repositori.</p>
<p>Però no podem fer un datasource com un objecte (com hem fet abans), perque si ara volem recuperar les dades de una base de dades, Api, o altres, (Implementació) el repositori no funcionaria, si no és que:</p>
<h2 id="3-implementacio-correcte-amb-separacio-de-capes-uidominidatasource">3. Implementació correcte (amb separació de capes UI,Domini,DataSource)</h2>
<p><strong>El datasource no és un objecte o classe, sinó un interface</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nc">ItemDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="w">   </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>I ara podem crear múltiples datasources, amb implementacions diferents (Mock, api, bbdd)</p>
<div class="admonition note">
<p class="admonition-title">Què és Mock?</p>
<p>Mock es refereix a dades falses, i s'utilitza en programació per provar les classes abans no es tingui una base de dades, api, etc.
En aquest cas, el MockItemDataSource és una llista precodificada (com havíem fet abans en el nostre object Datasource)</p>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MockItemDataSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="p">(</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element A&quot;</span><span class="p">),</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element B&quot;</span><span class="p">),</span>
<span class="w">       </span><span class="n">MyItem</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Element C&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">)</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">items</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">items</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="c1">//implementacio  }</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="c1">//implementacio }</span>
<span class="p">}</span>


<span class="kd">class</span><span class="w"> </span><span class="nc">RetrofitItemDataSource</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ItemDataSource</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getItems</span><span class="p">():</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">MyItem</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="n">MyItem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">RetrofitClient</span><span class="p">.</span><span class="na">instance</span><span class="p">.</span><span class="na">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">id</span><span class="p">).</span><span class="na">execute</span><span class="p">()</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>D'aquesta manera el Repositori no necessita saber com estan implementades (com s'aconsegueixen, es guarden, etc) les dades.</p>
<p>Ara podem fer fàcilment un 
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">ItemDataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">“</span><span class="n">Testing</span><span class="err">”</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CreateMockItemDataSource</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">CreateRetrofitItemDataSource</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>

<span class="kd">val</span><span class="w"> </span><span class="nv">itemRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ItemRepository</span><span class="p">(</span><span class="n">ItemDataSource</span><span class="p">)</span>

<span class="c1">//i ja es pot fer additem independentment de si es testing o si es api, room, etc…</span>
<span class="n">itemRepository</span><span class="p">.</span><span class="na">addItem</span><span class="p">(</span><span class="n">newitem</span><span class="p">)</span>
</code></pre></div>
Es poden crear altres datasources per coses diferents, però el repositori no té accés a les dades, ho fa a través del interface.</p>
<h2 id="4-explicacio-capes">4. Explicació capes</h2>
<p>Aquestes són les capes que han intervingut:</p>
<p><img alt="Domain layer" src="../Imatges/domainlayer.png" /></p>
<ul>
<li>Presentation (UI) Layer: ViewModel, estats UI i la Activity</li>
<li>Domain Layer: Conté l'entitat Item, el contracte ItemRepository i els Use Cases per a cada operació CRUD. Els Use Cases els explicarem en un altre apartat.</li>
<li>Data Layer: Implementa el repository i datasources. Conté l'entitat de base de dades, DAO (si n'hi ha).</li>
</ul>
<p>Dins el DataLayer:
<img alt="Data layer" src="../Imatges/datalayer.png" />{ align=left style="height: 30%; width: 30%; border-radius: 5px;" loading=lazy}</p>
<h3 id="principis-de-clean-code-aplicats">Principis de Clean Code aplicats:</h3>
<ul>
<li>Single Responsibility: Cada classe té una única responsabilitat</li>
<li>Dependency Inversion: Les capes superiors no depenen de les inferiors directament</li>
<li>Interface Segregation: Contractes específics per a cada funcionalitat</li>
<li>Separation of Concerns: Cada capa té la seva responsabilitat ben definida</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>El Domain Layer és el nucli de l'aplicació i roman estable independentment de com implementis la persistència o la presentació. Això és el que fa que l'arquitectura sigui tan robusta i mantenible.</p>
</div>
<h3 id="esquema-general">Esquema general:</h3>
<div class="highlight"><pre><span></span><code>┌─────────────────────┐
│   PRESENTATION      │  ← Depèn del Domain
│  (Activity/Fragment)│
└──────────┬──────────┘
           │ depèn de (a través dels casos d’ús o repositori)
           ▼
┌─────────────────────┐
│     DOMAIN          │  ← INDEPENDENT (no depèn de res)
│   (Use Cases)       │    Defineix contractes (interfaces)
└──────────▲──────────┘    i els casos d’us
           │ implementa
           │
┌─────────────────────┐
│      DATA           │  ← Depèn del Domain (implementa les interfaces)
│  (Repository Impl)  │    a través de la inversió de dependències.
└─────────────────────┘
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Veure apartat d'inversió de dependències</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Veure exemple implementació RecyclerView amb inversió de dependències
(Exemple DIP recycler)</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>